{"level":"info","time":"2023-12-20T08:12:26.636+0100","caller":"server/server.go:58","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-21T23:04:37.644+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-21T23:39:48.858+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-21T23:43:30.029+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-21T23:45:31.954+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-21T23:45:33.882+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-21T23:49:08.029+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-21T23:49:10.295+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-21T23:49:45.114+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-21T23:49:47.374+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-21T23:49:50.043+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-21T23:49:52.908+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-21T23:57:51.906+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-21T23:58:37.697+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-21T23:58:39.771+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-21T23:59:44.684+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-21T23:59:47.386+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-22T00:03:08.941+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-22T00:03:11.913+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-22T00:03:28.380+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-22T00:03:49.602+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-22T00:06:24.187+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-22T00:06:27.301+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-22T00:06:28.788+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-22T00:08:30.342+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-22T00:08:34.315+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-23T21:41:50.252+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-23T21:45:29.886+0100","caller":"log/log.go:87","msg":"mongo: no documents in result"}
{"level":"error","time":"2023-12-23T21:46:29.020+0100","caller":"log/log.go:87","msg":"mongo: no documents in result"}
{"level":"error","time":"2023-12-23T21:49:37.212+0100","caller":"handlers/menu.go:30","msg":"invalid character 'I' looking for beginning of value"}
{"level":"error","time":"2023-12-23T21:50:44.878+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-23T21:57:23.282+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-23T21:57:32.222+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-23T21:57:57.574+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-23T22:21:30.331+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-23T22:21:36.525+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-23T22:38:48.293+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-23T22:57:04.696+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-23T23:05:33.971+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-23T23:12:18.003+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-24T11:00:03.987+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-24T11:31:06.227+0100","caller":"log/log.go:87","msg":"invalid character '}' looking for beginning of object key string"}
{"level":"info","time":"2023-12-24T11:43:12.700+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-24T11:44:13.492+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-24T11:44:19.402+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-24T11:47:07.861+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-24T11:48:48.469+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-24T11:53:37.548+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"error","time":"2023-12-24T11:54:15.187+0100","caller":"handlers/menu.go:32","msg":"invalid character '\"' after object key:value pair"}
{"level":"error","time":"2023-12-24T11:54:53.962+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-24T11:59:48.774+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-24T11:59:52.418+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-24T12:03:56.219+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-24T12:04:09.251+0100","caller":"log/log.go:87","msg":"write exception: write errors: [Performing an update on the path '_id' would modify the immutable field '_id']"}
{"level":"info","time":"2023-12-24T12:12:43.081+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"error","time":"2023-12-24T12:12:49.014+0100","caller":"log/log.go:87","msg":"write exception: write errors: ['$set' is empty. You must specify a field like so: {$set: {<field>: ...}}]"}
{"level":"info","time":"2023-12-24T12:15:05.843+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-24T12:15:09.399+0100","caller":"log/log.go:78","msg":"&{0xc000212300 <nil> <nil> false true {0 0} false false false 0x67d740}"}
{"level":"info","time":"2023-12-24T13:44:14.134+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-24T13:46:14.548+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-24T13:50:48.397+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:12:01.716+0100","caller":"log/log.go:78","msg":"unable to connect to db ->  dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:12:01.734+0100","caller":"log/log.go:78","msg":"failed to generate migration instance -> URL cannot be empty"}
{"level":"info","time":"2023-12-26T05:16:01.000+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:17:18.895+0100","caller":"log/log.go:78","msg":"unable to connect to db ->  dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:17:18.896+0100","caller":"log/log.go:78","msg":"failed to generate migration instance -> URL cannot be empty"}
{"level":"info","time":"2023-12-26T05:17:19.082+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:23:25.124+0100","caller":"log/log.go:78","msg":"unable to connect to db ->  dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:23:25.126+0100","caller":"log/log.go:78","msg":"failed to generate migration instance -> URL cannot be empty"}
{"level":"info","time":"2023-12-26T05:23:25.315+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:24:43.943+0100","caller":"log/log.go:78","msg":"unable to connect to db ->  dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:24:43.944+0100","caller":"log/log.go:78","msg":"failed to generate migration instance -> URL cannot be empty"}
{"level":"info","time":"2023-12-26T05:24:44.143+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:26:28.341+0100","caller":"log/log.go:78","msg":"unable to connect to db ->  dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:26:28.343+0100","caller":"log/log.go:78","msg":"failed to generate migration instance -> dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:26:28.540+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:35:42.088+0100","caller":"log/log.go:75","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:35:42.091+0100","caller":"log/log.go:78","msg":"unable to connect to db ->  dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:35:42.093+0100","caller":"log/log.go:78","msg":"failed to generate migration instance -> dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:40:28.846+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:40:28.848+0100","msg":"unable to connect to db ->  dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:40:28.848+0100","msg":"failed to generate migration instance -> dial tcp 127.0.0.1:5432: connect: connection refused"}
{"level":"info","time":"2023-12-26T05:46:49.213+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T05:46:49.333+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T05:46:50.015+0100","msg":"Migration up failed -> migration failed: syntax error at or near \"CREATE\" (column 1) in line 19: CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\nCREATE TABLE IF NOT EXISTS menu(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    description     VARCHAR (200) NULL\n);\n\nCREATE TABLE IF NOT EXISTS dish(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    description     VARCHAR (200) NULL,\n    price           DECIMAL (20, 2) NOT NULL,\n    menu_id         UUID NOT NULL REFERENCES menu (id) ON DELETE CASCADE\n);\n\nCREATE TYPE order_status AS ENUM ('pending', 'processing', 'completed', 'canceled')\n\nCREATE TABLE IF NOT EXISTS order(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    status             order_status     NOT NULL,\n    created_at         TIMESTAMP DEFAULT NOW (),\n    updated_at         TIMESTAMP DEFAULT NOW () ON UPDATE NOW() NULL   \n\n);\nCREATE TABLE IF NOT EXISTS orderItem(\n    id             UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    order_id       UUID NOT NULL REFERENCES order (id)   ON DELETE CASCADE,\n    dish_id        UUID NOT NULL REFERENCES dish (id) ON DELETE CASCADE,\n    quantity       INT NOT NULL\n\n);\n\nCREATE TYPE table_status AS ENUM ('occupied', 'available')\n\nCREATE TABLE IF NOT EXISTS table(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    capacity        INT  NOT NULL,\n    status          table_status   NOT NULL\n\n);\n\nCREATE TYPE reservation_status AS ENUM ('confirmed', 'canceled')\n\nCREATE TABLE IF NOT EXISTS reservation(\n    id                     UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    table_id               UUID NOT NULL REFERENCES table (id) ON DELETE CASCADE,\n    reservation_date       DATE NOT NULL,\n    reservation_time       TIME  NOT NULL, \n    status                 reservation_status  NOT NULL,\n    created_at             TIMESTAMP DEFAULT NOW (),\n    updated_at             TIMESTAMP DEFAULT NOW () ON UPDATE NOW() NULL   \n);\n\nCREATE TABLE IF NOT EXISTS invoice(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    order_id           UUID NOT NULL REFERENCES order (id)   ON DELETE CASCADE,\n    invoice_date       DATE NOT NULL,\n    total_amount       DECIMAL (20, 2) NOT NULL,\n    tax                DECIMAL (20, 2) NOT NULL,\n    discount           DECIMAL (20, 2) NOT NULL,\n    grand_total        DECIMAL (20, 2) NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS user(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    first_name         VARCHAR(50) NOT NULL,\n    last_name          VARCHAR(50) NOT NULL ,\n    email              VARCHAR(255) NOT NULL UNIQUE,\n    password_hash      VARCHAR(255) NOT NULL,\n    created_at         TIMESTAMP DEFAULT NOW (),\n    updated_at         TIMESTAMP DEFAULT NOW () ON UPDATE NOW() NULL    \n);\n (details: pq: syntax error at or near \"CREATE\")"}
{"level":"info","time":"2023-12-26T06:02:59.791+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T06:02:59.829+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T06:03:00.882+0100","msg":"Migration up failed -> migration failed: syntax error at or near \"order\" (column 28) in line 19: CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\nCREATE TABLE IF NOT EXISTS menu(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    description     VARCHAR (200) NULL\n);\n\nCREATE TABLE IF NOT EXISTS dish(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    description     VARCHAR (200) NULL,\n    price           DECIMAL (20, 2) NOT NULL,\n    menu_id         UUID NOT NULL REFERENCES menu (id) ON DELETE CASCADE\n);\n\nCREATE TYPE order_status AS ENUM ('pending', 'processing', 'completed', 'canceled');\n\nCREATE TABLE IF NOT EXISTS order(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    status             order_status     NOT NULL,\n    created_at         TIMESTAMP DEFAULT NOW (),\n    updated_at         TIMESTAMP DEFAULT NOW () ON UPDATE NOW() NULL   \n\n);\nCREATE TABLE IF NOT EXISTS orderItem(\n    id             UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    order_id       UUID NOT NULL REFERENCES order (id)   ON DELETE CASCADE,\n    dish_id        UUID NOT NULL REFERENCES dish (id) ON DELETE CASCADE,\n    quantity       INT NOT NULL\n\n);\n\nCREATE TYPE table_status AS ENUM ('occupied', 'available');\n\nCREATE TABLE IF NOT EXISTS table(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    capacity        INT  NOT NULL,\n    status          table_status   NOT NULL\n\n);\n\nCREATE TYPE reservation_status AS ENUM ('confirmed', 'canceled');\n\nCREATE TABLE IF NOT EXISTS reservation(\n    id                     UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    table_id               UUID NOT NULL REFERENCES table (id) ON DELETE CASCADE,\n    reservation_date       DATE NOT NULL,\n    reservation_time       TIME  NOT NULL, \n    status                 reservation_status  NOT NULL,\n    created_at             TIMESTAMP DEFAULT NOW (),\n    updated_at             TIMESTAMP DEFAULT NOW () ON UPDATE NOW() NULL   \n);\n\nCREATE TABLE IF NOT EXISTS invoice(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    order_id           UUID NOT NULL REFERENCES order (id)   ON DELETE CASCADE,\n    invoice_date       DATE NOT NULL,\n    total_amount       DECIMAL (20, 2) NOT NULL,\n    tax                DECIMAL (20, 2) NOT NULL,\n    discount           DECIMAL (20, 2) NOT NULL,\n    grand_total        DECIMAL (20, 2) NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS user(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    first_name         VARCHAR(50) NOT NULL,\n    last_name          VARCHAR(50) NOT NULL ,\n    email              VARCHAR(255) NOT NULL UNIQUE,\n    password_hash      VARCHAR(255) NOT NULL,\n    created_at         TIMESTAMP DEFAULT NOW (),\n    updated_at         TIMESTAMP DEFAULT NOW () ON UPDATE NOW() NULL    \n);\n (details: pq: syntax error at or near \"order\")"}
{"level":"info","time":"2023-12-26T15:41:02.469+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T15:41:02.684+0100","msg":"unable to connect to db ->  read tcp 127.0.0.1:56360->127.0.0.1:5432: read: connection reset by peer"}
{"level":"info","time":"2023-12-26T15:41:02.689+0100","msg":"failed to generate migration instance -> read tcp 127.0.0.1:56366->127.0.0.1:5432: read: connection reset by peer"}
{"level":"info","time":"2023-12-26T15:45:27.540+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T15:45:27.884+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T15:45:29.421+0100","msg":"Migration up failed -> migration failed: syntax error at or near \"order\" (column 28) in line 19: CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\nCREATE TABLE IF NOT EXISTS menu(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    description     VARCHAR (200) NULL\n);\n\nCREATE TABLE IF NOT EXISTS dish(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    description     VARCHAR (200) NULL,\n    price           DECIMAL (20, 2) NOT NULL,\n    menu_id         UUID NOT NULL REFERENCES menu (id) ON DELETE CASCADE\n);\n\nCREATE TYPE order_status AS ENUM ('pending', 'processing', 'completed', 'canceled');\n\nCREATE TABLE IF NOT EXISTS order(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    status             order_status     NOT NULL,\n    created_at         TIMESTAMP NOT NULL DEFAULT NOW(),\n    updated_at         TIMESTAMP NULL   \n\n);\nCREATE TABLE IF NOT EXISTS orderItem(\n    id             UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    order_id       UUID NOT NULL REFERENCES order (id)   ON DELETE CASCADE,\n    dish_id        UUID NOT NULL REFERENCES dish (id) ON DELETE CASCADE,\n    quantity       INT NOT NULL\n\n);\n\nCREATE TYPE restaurant_table_status AS ENUM ('occupied', 'available');\n\nCREATE TABLE IF NOT EXISTS restaurant_table(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    capacity        INT  NOT NULL,\n    status          restaurant_table_status   NOT NULL\n\n);\n\nCREATE TYPE reservation_status AS ENUM ('confirmed', 'canceled');\n\nCREATE TABLE IF NOT EXISTS reservation(\n    id                     UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    table_id               UUID NOT NULL REFERENCES table (id) ON DELETE CASCADE,\n    reservation_date       DATE NOT NULL,\n    reservation_time       TIME  NOT NULL, \n    status                 reservation_status  NOT NULL,\n    created_at             TIMESTAMP NOT NULL DEFAULT NOW(),\n    updated_at             TIMESTAMP NULL   \n);\n\nCREATE TABLE IF NOT EXISTS invoice(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    order_id           UUID NOT NULL REFERENCES order (id)   ON DELETE CASCADE,\n    invoice_date       DATE NOT NULL,\n    total_amount       DECIMAL (20, 2) NOT NULL,\n    tax                DECIMAL (20, 2) NOT NULL,\n    discount           DECIMAL (20, 2) NOT NULL,\n    grand_total        DECIMAL (20, 2) NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS user(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    first_name         VARCHAR(50) NOT NULL,\n    last_name          VARCHAR(50) NOT NULL ,\n    email              VARCHAR(255) NOT NULL UNIQUE,\n    password_hash      VARCHAR(255) NOT NULL,\n    created_at         TIMESTAMP NOT NULL DEFAULT NOW(),\n    updated_at         TIMESTAMP NULL   \n);\n\n\nCREATE OF REPLACE FUNCTION update_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW()\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER e_u_ctd\nAFTER UPDATE\nON order\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at();\n\nCREATE TRIGGER e_u_ctd\nAFTER UPDATE\nON reservation\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at();\n\nCREATE TRIGGER e_u_ctd\nAFTER UPDATE\nON user\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at(); (details: pq: syntax error at or near \"order\")"}
{"level":"info","time":"2023-12-26T16:32:25.969+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T16:32:25.975+0100","msg":"unable to connect to db ->  read tcp 127.0.0.1:53522->127.0.0.1:5432: read: connection reset by peer"}
{"level":"info","time":"2023-12-26T16:32:25.978+0100","msg":"failed to generate migration instance -> read tcp 127.0.0.1:53532->127.0.0.1:5432: read: connection reset by peer"}
{"level":"info","time":"2023-12-26T16:32:30.211+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T16:32:30.215+0100","msg":"unable to connect to db ->  read tcp 127.0.0.1:53544->127.0.0.1:5432: read: connection reset by peer"}
{"level":"info","time":"2023-12-26T16:32:30.219+0100","msg":"failed to generate migration instance -> read tcp 127.0.0.1:53556->127.0.0.1:5432: read: connection reset by peer"}
{"level":"info","time":"2023-12-26T16:32:34.425+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T16:32:34.496+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T16:32:34.862+0100","msg":"Migration up failed -> migration failed: syntax error at or near \"order\" (column 28) in line 19: CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\nCREATE TABLE IF NOT EXISTS menu(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    description     VARCHAR (200) NULL\n);\n\nCREATE TABLE IF NOT EXISTS dish(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    description     VARCHAR (200) NULL,\n    price           DECIMAL (20, 2) NOT NULL,\n    menu_id         UUID NOT NULL REFERENCES menu (id) ON DELETE CASCADE\n);\n\nCREATE TYPE order_status AS ENUM ('pending', 'processing', 'completed', 'canceled');\n\nCREATE TABLE IF NOT EXISTS order(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    status             order_status     NOT NULL,\n    created_at         TIMESTAMP NOT NULL DEFAULT NOW(),\n    updated_at         TIMESTAMP NULL   \n\n);\nCREATE TABLE IF NOT EXISTS orderItem(\n    id             UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    order_id       UUID NOT NULL REFERENCES order (id)   ON DELETE CASCADE,\n    dish_id        UUID NOT NULL REFERENCES dish (id) ON DELETE CASCADE,\n    quantity       INT NOT NULL\n\n);\n\nCREATE TYPE restaurant_table_status AS ENUM ('occupied', 'available');\n\nCREATE TABLE IF NOT EXISTS restaurant_table(\n    id              UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    name            VARCHAR (200) NOT NULL,\n    capacity        INT  NOT NULL,\n    status          restaurant_table_status   NOT NULL\n\n);\n\nCREATE TYPE reservation_status AS ENUM ('confirmed', 'canceled');\n\nCREATE TABLE IF NOT EXISTS reservation(\n    id                     UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    table_id               UUID NOT NULL REFERENCES table (id) ON DELETE CASCADE,\n    reservation_date       DATE NOT NULL,\n    reservation_time       TIME  NOT NULL, \n    status                 reservation_status  NOT NULL,\n    created_at             TIMESTAMP NOT NULL DEFAULT NOW(),\n    updated_at             TIMESTAMP NULL   \n);\n\nCREATE TABLE IF NOT EXISTS invoice(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    order_id           UUID NOT NULL REFERENCES order (id)   ON DELETE CASCADE,\n    invoice_date       DATE NOT NULL,\n    total_amount       DECIMAL (20, 2) NOT NULL,\n    tax                DECIMAL (20, 2) NOT NULL,\n    discount           DECIMAL (20, 2) NOT NULL,\n    grand_total        DECIMAL (20, 2) NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS user(\n    id                 UUID DEFAULT uuid_generate_v4 () PRIMARY KEY,\n    first_name         VARCHAR(50) NOT NULL,\n    last_name          VARCHAR(50) NOT NULL ,\n    email              VARCHAR(255) NOT NULL UNIQUE,\n    password_hash      VARCHAR(255) NOT NULL,\n    created_at         TIMESTAMP NOT NULL DEFAULT NOW(),\n    updated_at         TIMESTAMP NULL   \n);\n\n\nCREATE OF REPLACE FUNCTION update_updated_at()\nRETURNS TRIGGER AS $$\nBEGIN\n    NEW.updated_at = NOW()\n    RETURN NEW;\nEND;\n$$ LANGUAGE plpgsql;\n\nCREATE TRIGGER e_u_ctd\nAFTER UPDATE\nON order\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at();\n\nCREATE TRIGGER e_u_ctd\nAFTER UPDATE\nON reservation\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at();\n\nCREATE TRIGGER e_u_ctd\nAFTER UPDATE\nON user\nFOR EACH ROW\nEXECUTE FUNCTION update_updated_at(); (details: pq: syntax error at or near \"order\")"}
{"level":"info","time":"2023-12-26T16:38:17.179+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T16:38:17.213+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T16:38:17.245+0100","msg":"Migration up failed -> Dirty database version 1. Fix and force version."}
{"level":"info","time":"2023-12-26T16:39:15.824+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T16:39:15.856+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T16:39:15.886+0100","msg":"DB is up-to-date. No migrations done -> no change"}
{"level":"info","time":"2023-12-26T16:46:49.283+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T16:46:49.319+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T16:46:49.349+0100","msg":"DB is up-to-date. No migrations done -> no change"}
{"level":"info","time":"2023-12-26T18:24:03.997+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:24:04.239+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:24:04.347+0100","msg":"DB is up-to-date. No migrations done -> no change"}
{"level":"info","time":"2023-12-26T18:26:03.236+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:26:03.283+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:26:03.327+0100","msg":"DB is up-to-date. No migrations done -> no change"}
{"level":"info","time":"2023-12-26T18:27:09.655+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:27:09.764+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:27:09.838+0100","msg":"Migration up failed -> no change"}
{"level":"info","time":"2023-12-26T18:29:24.151+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:29:24.257+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:29:24.258+0100","msg":"failed to generate migration instance -> open /home/amos/dev/workspace/restaurant-api/db/migrations/.: no such file or directory"}
{"level":"info","time":"2023-12-26T18:30:05.840+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:30:05.881+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:30:05.921+0100","msg":"Migration up failed -> no change"}
{"level":"info","time":"2023-12-26T18:30:16.343+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:30:16.409+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:30:16.441+0100","msg":"Migration up failed -> no change"}
{"level":"info","time":"2023-12-26T18:31:17.192+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:31:17.274+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:31:17.347+0100","msg":"Migration up failed -> no change"}
{"level":"info","time":"2023-12-26T18:32:13.340+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:32:13.376+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:32:13.420+0100","msg":"Migration up failed -> no change"}
{"level":"info","time":"2023-12-26T18:35:26.363+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:35:26.427+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:35:28.412+0100","msg":"Migration successful"}
{"level":"info","time":"2023-12-26T18:36:14.581+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:36:14.621+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:36:14.661+0100","msg":"DB is up-to-date. No migrations done -> no change"}
{"level":"info","time":"2023-12-26T18:36:30.481+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:36:30.515+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:36:32.517+0100","msg":"Migration successful"}
{"level":"info","time":"2023-12-26T18:38:28.078+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:38:28.112+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:38:28.143+0100","msg":"DB is up-to-date. No migrations done -> no change"}
{"level":"info","time":"2023-12-26T18:38:40.876+0100","msg":"Serving request over 127.0.0.1:8080\n"}
{"level":"info","time":"2023-12-26T18:38:40.917+0100","msg":"successfully connected to postgres database"}
{"level":"info","time":"2023-12-26T18:38:42.921+0100","msg":"Migration successful"}
